# OPC UA Generic Server (namespace 0)
# Server statistics and health
# Macros:
# P     device prefix
# R     device suffix
# SESS  session name
# SUBS  subscription name

# dynamic information (read on subscription)
# 0:ServerStatus/CurrentTime
record(stringin, "$(P)$(R)CurrentTime") {
  field(DTYP, "OPCUA")
  field(INP, "@$(SUBS) i=2258")
}

record(mbbi, "$(P)$(R)ServerState") {
  field(DTYP, "OPCUA")
  field(INP, "@$(SUBS) i=2259")
  field(ZRST, "Running")
  field(ONST, "Failed")
  field(TWST, "NoConfiguration")
  field(THST, "Suspended")
  field(FRST, "Shutdown")
  field(FVST, "Test")
  field(SXST, "CommunicationFault")
  field(SVST, "Unknown")
}

# 0: ServerDiagnostics/ServerDiagnosticsSummary
record(longin, "$(P)$(R)CurrentSessionCount") {
  field(DTYP, "OPCUA")
  field(INP, "@$(SUBS) i=2277")
}
# 0: ServerDiagnostics/ServerDiagnosticsSummary
record(longin, "$(P)$(R)CurrentSubscriptionCount") {
  field(DTYP, "OPCUA")
  field(INP, "@$(SUBS) i=2285")
}
# 0: ServerDiagnostics/ServerDiagnosticsSummary
record(longin, "$(P)$(R)CumulatedSessionCount") {
  field(DTYP, "OPCUA")
  field(INP, "@$(SUBS) i=2278")
}
# 0: ServerDiagnostics/ServerDiagnosticsSummar
record(longin, "$(P)$(R)CumulatedSubscriptionCount") {
  field(DTYP, "OPCUA")
  field(INP, "@$(SUBS) i=2286")
}

# static information (always read when connecting)
# 0:ServerStatus/StartTime
record(stringin, "$(P)$(R)StartTime") {
  field(DTYP, "OPCUA")
  field(INP, "@$(SESS) i=2257")
}
